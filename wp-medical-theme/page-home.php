<?php
/*
Template Name: –ì–æ–ª–æ–≤–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞
*/
get_header(); ?>

<!-- –°–ª–∞–π–¥–µ—Ä –Ω–æ–≤–æ—Å—Ç–µ–π -->
<section class="news-slider-section">
    <div class="container">
        <div class="news-slider" id="newsSlider">
            <div class="news-slides-container" id="newsContainer">
                <!-- –°–ª–∞–π–¥—ã –Ω–æ–≤–æ—Å—Ç–µ–π –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
            </div>
        </div>
        <div class="news-controls">
            <div class="news-indicators" id="newsIndicators">
                <!-- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
            </div>
        </div>
    </div>
</section>

<!-- –ì–ª–∞–≤–Ω—ã–π —Å–ª–∞–π–¥–µ—Ä -->
<section class="hero-slider">
    <div class="slide active">
        <div class="slide-bg" style="background-image: url('https://images.unsplash.com/photo-1559757148-5c350d0d3c56?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&q=80')"></div>
        <div class="container">
            <div class="hero-content">
                <div class="hero-text">
                    <span class="hero-badge">üèÜ –ö—Ä–∞—â–∞ –º–µ–¥–∏—á–Ω–∞ –∫–ª—ñ–Ω—ñ–∫–∞ 2024</span>
                    <h1>–ü–æ–≤–Ω–∏–π –∫–æ–º–ø–ª–µ–∫—Å –º–µ–¥–∏—á–Ω–∏—Ö –ø–æ—Å–ª—É–≥</h1>
                    <p>–ü—Ä–æ—Ñ–µ—Å—ñ–π–Ω–∞ –º–µ–¥–∏—á–Ω–∞ –¥–æ–ø–æ–º–æ–≥–∞ –Ω–∞ –Ω–∞–π–≤–∏—â–æ–º—É —Ä—ñ–≤–Ω—ñ. –î–æ—Å–≤—ñ–¥—á–µ–Ω—ñ –ª—ñ–∫–∞—Ä—ñ, —Å—É—á–∞—Å–Ω–µ –æ–±–ª–∞–¥–Ω–∞–Ω–Ω—è, —ñ–Ω–¥–∏–≤—ñ–¥—É–∞–ª—å–Ω–∏–π –ø—ñ–¥—Ö—ñ–¥.</p>
                    <div class="hero-actions">
                        <button class="btn btn-hero-primary">–ó–∞–ø–∏—Å–∞—Ç–∏—Å—è –Ω–∞ –ø—Ä–∏–π–æ–º</button>
                        <button class="btn btn-hero-secondary">–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—è –æ–Ω–ª–∞–π–Ω</button>
                    </div>
                </div>
                <div class="hero-widget">
                    <div class="widget-card">
                        <div class="widget-header">
                            <div class="widget-icon">
                                <i class="fas fa-user-md"></i>
                            </div>
                            <h3>–í–∏ –¥–æ–ø–æ–º–∞–≥–∞—î—Ç–µ ‚Äî –º–∏ –ª—ñ–∫—É—î–º–æ!</h3>
                        </div>
                        <div class="widget-content">
                            <p>–ó–¥–æ—Ä–æ–≤—ñ —Ç–∞ –ø–æ—Ä–∞–Ω–µ–Ω—ñ —É–∫—Ä–∞—ó–Ω—Ü—ñ –º–æ–∂—É—Ç—å –æ–±–º—ñ—Ä–∫—É–≤–∞—Ç–∏ –∑–∞—è–≤–∫–∏ –≤–∞–º –Ω–∞ –¥–æ–ø–æ–º–æ–≥—É!</p>
                            <div class="widget-images">
                                <div class="patient-photo"></div>
                                <div class="patient-photo"></div>
                                <div class="patient-photo"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- –ë—ã—Å—Ç—Ä–∞—è –∑–∞–ø–∏—Å—å -->
<section class="quick-booking">
    <div class="container">
        <div class="booking-form">
            <h3>–®–≤–∏–¥–∫–∏–π –∑–∞–ø–∏—Å</h3>
            <form id="quickBookingForm">
                <div class="form-group">
                    <select name="service" required>
                        <option value="">–û–±–µ—Ä—ñ—Ç—å –ø–æ—Å–ª—É–≥—É</option>
                        <option value="consultation">–ö–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—è</option>
                        <option value="diagnostics">–î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞</option>
                        <option value="analysis">–ê–Ω–∞–ª—ñ–∑–∏</option>
                    </select>
                </div>
                <div class="form-group">
                    <select name="doctor" required>
                        <option value="">–û–±–µ—Ä—ñ—Ç—å –ª—ñ–∫–∞—Ä—è</option>
                        <option value="petrov">–ü–µ—Ç—Ä–æ–≤ –ò.–ò.</option>
                        <option value="ivanova">–ò–≤–∞–Ω–æ–≤–∞ –ú.–°.</option>
                    </select>
                </div>
                <div class="form-group">
                    <input type="date" name="date" required>
                </div>
                <div class="form-group">
                    <input type="tel" name="phone" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω" required>
                </div>
                <button type="submit" class="btn btn-primary">–ó–∞–ø–∏—Å–∞—Ç–∏—Å—è</button>
            </form>
        </div>
    </div>
</section>

<!-- –ù–∞—à–∏ —É—Å–ª—É–≥–∏ -->
<section class="services-section">
    <div class="container">
        <h2>–ù–∞—à—ñ –ø–æ—Å–ª—É–≥–∏</h2>
        <div class="services-grid" id="servicesGrid">
            <?php
            $services = new WP_Query(array(
                'post_type' => 'services',
                'posts_per_page' => 6
            ));
            
            if ($services->have_posts()) :
                while ($services->have_posts()) : $services->the_post();
                    $price = get_post_meta(get_the_ID(), '_service_price', true);
                    $duration = get_post_meta(get_the_ID(), '_service_duration', true);
                    $icon = get_post_meta(get_the_ID(), '_service_icon', true);
                    ?>
                    <div class="service-card">
                        <div class="service-icon">
                            <i class="<?php echo esc_attr($icon ? $icon : 'fas fa-stethoscope'); ?>"></i>
                        </div>
                        <h3><?php the_title(); ?></h3>
                        <p><?php the_excerpt(); ?></p>
                        <div class="service-meta">
                            <span class="service-price"><?php echo esc_html($price); ?> –≥—Ä–Ω</span>
                            <span class="service-duration"><?php echo esc_html($duration); ?></span>
                        </div>
                    </div>
                <?php endwhile;
                wp_reset_postdata();
            else :
                // –ï—Å–ª–∏ –Ω–µ—Ç —É—Å–ª—É–≥ –≤ –±–∞–∑–µ, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
                echo do_shortcode('[medical_service name="–¢–µ—Ä–∞–ø—ñ—è" description="–ó–∞–≥–∞–ª—å–Ω–∞ —Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–Ω–∞ –¥–æ–ø–æ–º–æ–≥–∞ —Ç–∞ –∫–æ–Ω—Å—É–ª—å—Ç–∞—Ü—ñ—ó" icon="fas fa-stethoscope" price="500" duration="30 —Ö–≤"]');
                echo do_shortcode('[medical_service name="–ö–∞—Ä–¥—ñ–æ–ª–æ–≥—ñ—è" description="–î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Ç–∞ –ª—ñ–∫—É–≤–∞–Ω–Ω—è —Å–µ—Ä—Ü–µ–≤–æ-—Å—É–¥–∏–Ω–Ω–∏—Ö –∑–∞—Ö–≤–æ—Ä—é–≤–∞–Ω—å" icon="fas fa-heartbeat" price="800" duration="45 —Ö–≤"]');
                echo do_shortcode('[medical_service name="–ù–µ–≤—Ä–æ–ª–æ–≥—ñ—è" description="–õ—ñ–∫—É–≤–∞–Ω–Ω—è –∑–∞—Ö–≤–æ—Ä—é–≤–∞–Ω—å –Ω–µ—Ä–≤–æ–≤–æ—ó —Å–∏—Å—Ç–µ–º–∏" icon="fas fa-brain" price="700" duration="40 —Ö–≤"]');
            endif;
            ?>
        </div>
    </div>
</section>

<!-- –ù–∞—à–∏ –≤—Ä–∞—á–∏ -->
<section class="doctors-section">
    <div class="container">
        <h2>–ù–∞—à—ñ –ª—ñ–∫–∞—Ä—ñ</h2>
        <div class="doctors-grid" id="doctorsGrid">
            <?php
            $doctors = new WP_Query(array(
                'post_type' => 'doctors',
                'posts_per_page' => 6
            ));
            
            if ($doctors->have_posts()) :
                while ($doctors->have_posts()) : $doctors->the_post();
                    $specialty = get_post_meta(get_the_ID(), '_doctor_specialty', true);
                    $experience = get_post_meta(get_the_ID(), '_doctor_experience', true);
                    ?>
                    <div class="doctor-card">
                        <?php if (has_post_thumbnail()) : ?>
                            <div class="doctor-photo" style="background-image: url('<?php echo get_the_post_thumbnail_url(get_the_ID(), 'medium'); ?>')"></div>
                        <?php else : ?>
                            <div class="doctor-photo" style="background-image: url('<?php echo get_template_directory_uri(); ?>/images/doctor-placeholder.jpg')"></div>
                        <?php endif; ?>
                        <div class="doctor-info">
                            <h3 class="doctor-name"><?php the_title(); ?></h3>
                            <div class="doctor-specialty"><?php echo esc_html($specialty); ?></div>
                            <div class="doctor-experience"><?php echo esc_html($experience); ?> —Ä–æ–∫—ñ–≤ –¥–æ—Å–≤—ñ–¥—É</div>
                            <p><?php the_excerpt(); ?></p>
                        </div>
                    </div>
                <?php endwhile;
                wp_reset_postdata();
            endif;
            ?>
        </div>
        <div class="section-footer">
            <a href="<?php echo get_post_type_archive_link('doctors'); ?>" class="btn btn-outline">–£—Å—ñ –ª—ñ–∫–∞—Ä—ñ</a>
        </div>
    </div>
</section>

<?php echo do_shortcode('[medical_stats]'); ?>

<!-- –û—Ç–∑—ã–≤—ã -->
<section class="reviews-section">
    <div class="container">
        <h2>–í—ñ–¥–≥—É–∫–∏ –ø–∞—Ü—ñ—î–Ω—Ç—ñ–≤</h2>
        <div class="reviews-slider" id="reviewsSlider">
            <!-- –û—Ç–∑—ã–≤—ã –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
        </div>
    </div>
</section>

<?php get_footer(); ?>